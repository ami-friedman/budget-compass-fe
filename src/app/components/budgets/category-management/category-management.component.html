<div class="container mx-auto p-4">
  <h2 class="text-2xl font-bold mb-4">Manage Categories</h2>

  <!-- Add New Category Form -->
  <div class="mb-6 p-4 border rounded-lg shadow-sm">
    <h3 class="text-lg font-semibold mb-2">Add New Category</h3>
    <div class="flex items-center">
      <input
        type="text"
        [(ngModel)]="newCategoryName"
        (keyup.enter)="addCategory()"
        placeholder="e.g., Groceries"
        class="input input-bordered w-full max-w-xs mr-2"
        style="color: black;"
      />
      <button (click)="addCategory()" class="btn btn-primary">Add</button>
    </div>
  </div>

  <!-- List of Active Categories -->
  <div class="overflow-x-auto">
    <table class="table w-full">
      <thead>
        <tr>
          <th class="text-left">Category Name</th>
          <th class="text-right w-40">Actions</th>
        </tr>
      </thead>
      <tbody>
        @for (category of categories(); track category.id) {
          <tr>
            <td>
              @if (editingCategoryId === category.id) {
                <input
                  type="text"
                  [(ngModel)]="editingCategoryName"
                  (keyup.enter)="saveCategory(category.id)"
                  (keyup.escape)="cancelEdit()"
                  class="input input-bordered input-sm w-full"
                  style="color: black;"
                  autofocus
                />
              } @else {
                <span>{{ category.name }}</span>
              }
            </td>
            <td class="text-right">
              @if (editingCategoryId === category.id) {
                <button (click)="saveCategory(category.id)" class="btn btn-sm btn-success mr-2">Save</button>
                <button (click)="cancelEdit()" class="btn btn-sm btn-ghost">Cancel</button>
              } @else {
                <button (click)="startEdit(category)" class="btn btn-sm btn-ghost mr-2">Edit</button>
                <button (click)="archiveCategory(category.id)" class="btn btn-sm btn-error">Archive</button>
              }
            </td>
          </tr>
        } @empty {
          <tr>
            <td colspan="2" class="text-center py-4">No categories found. Add one to get started!</td>
          </tr>
        }
      </tbody>
    </table>
  </div>
</div>